#!/usr/bin/env python
import sys
import models as mb
from settings import setup
from sofos import create_database as cd


if __name__ == '__main__':
    # command = sys.argv[1]
    argsize = len(sys.argv)
    if argsize == 1:
        pass
    elif argsize >= 2:
        command = sys.argv[1]
        assert command in ('run', 'dbcreate')
        if command == 'dbcreate':
            if argsize >= 3:
                dbname = sys.argv[2]
            else:
                dbname = 'testdb.sqlite3'
            cd.create_tables(dbname, mb)
        elif command == 'run':
            import sys
            from main import MainWindow
            import PyQt5.QtWidgets as Qw
            app = Qw.QApplication(sys.argv)
            app.setOrganizationName(setup["organization_name"])
            app.setOrganizationDomain(setup["organization_domain"])
            app.setApplicationName(setup["application_name"])
            mainWin = MainWindow()
            mainWin.show()
            sys.exit(app.exec_())
